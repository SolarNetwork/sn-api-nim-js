import{Environment,UrlHelper,UserUrlHelperMixin}from"solarnetwork-api-core";var classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),inherits=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},possibleConstructorReturn=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},toConsumableArray=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},SolarNodeImageInfo=function(){function e(t,n,r,o,i){classCallCheck(this,e),this.id=t,this.sha256=n,this.contentLength=r,this.uncompressedSha256=o,this.uncompressedContentLength=i,this.constructor===e&&Object.freeze(this)}return createClass(e,[{key:"toJsonEncoding",value:function(){return JSON.stringify(this)}}],[{key:"fromJsonEncoding",value:function(t){var n=[];if(t){var r="string"==typeof t?JSON.parse(t):t;n.push(r.id||""),n.push(r.sha256||""),n.push(r.contentLength||0),n.push(r.uncompressedSha256||""),n.push(r.uncompressedContentLength||0)}return new(Function.prototype.bind.apply(e,[null].concat(n)))}}]),e}(),NimDefaultPath="/solarnode-image-maker",NimPathKey="nimPath",NimApiPathV1="/api/v1",NimSessionKey="nimSessionKey",NimUrlHelperMixin=function(e){return function(t){function n(){for(var e,t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];classCallCheck(this,n);var i=r&&r[0]?r[0]instanceof Environment?r[0]:new Environment(r[0]):new Environment({tls:!0,host:"apps.solarnetwork.net",port:443,nimPath:NimDefaultPath});return r||(r=[]),r[0]=i,possibleConstructorReturn(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(toConsumableArray(r))))}return inherits(n,e),createClass(n,[{key:"baseUrl",value:function(){var e=this.env(NimPathKey)||NimDefaultPath;return this.hostUrl()+e+NimApiPathV1}},{key:"pingUrl",value:function(){return this.baseUrl()+"/ping"}},{key:"authorizeSessionUrl",value:function(){return this.baseUrl()+"/images/authorize"}},{key:"listBaseImagesUrl",value:function(){return this.baseUrl()+"/images/infos"}},{key:"createImageUrl",value:function(e,t){var n=t||this.nimSessionKey;return this.baseUrl()+"/images/create/"+encodeURIComponent(e)+"/"+encodeURIComponent(n)}},{key:"createImageReceiptUrl",value:function(e,t){var n=t||this.nimSessionKey;return this.baseUrl()+"/images/receipt/"+encodeURIComponent(e)+"/"+encodeURIComponent(n)}},{key:"downloadImageUrl",value:function(e,t){var n=t||this.nimSessionKey;return this.baseUrl()+"/images/"+encodeURIComponent(e)+"/"+encodeURIComponent(n)}},{key:"nimSessionKey",get:function(){return this.parameter(NimSessionKey)},set:function(e){this.parameter(NimSessionKey,e)}}]),n}()},NimUrlHelper=function(e){function t(){return classCallCheck(this,t),possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return inherits(t,e),t}(NimUrlHelperMixin(UserUrlHelperMixin(UrlHelper)));export{SolarNodeImageInfo,NimUrlHelperMixin,NimDefaultPath,NimPathKey,NimApiPathV1,NimUrlHelper};