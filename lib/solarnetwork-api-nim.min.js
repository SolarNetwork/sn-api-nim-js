!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("solarnetwork-api-core")):"function"==typeof define&&define.amd?define(["exports","solarnetwork-api-core"],n):n(e.sn=e.sn||{},e.sn)}(this,function(e,n){"use strict";var t=function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")},r=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),o=function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)},i=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n},s=function(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)},a=function(){function e(n,r,o,i,s){t(this,e),this.id=n,this.sha256=r,this.contentLength=o,this.uncompressedSha256=i,this.uncompressedContentLength=s,this.constructor===e&&Object.freeze(this)}return r(e,[{key:"toJsonEncoding",value:function(){return JSON.stringify(this)}}],[{key:"fromJsonEncoding",value:function(n){var t=[];if(n){var r="string"==typeof n?JSON.parse(n):n;t.push(r.id||""),t.push(r.sha256||""),t.push(r.contentLength||0),t.push(r.uncompressedSha256||""),t.push(r.uncompressedContentLength||0)}return new(Function.prototype.bind.apply(e,[null].concat(t)))}}]),e}(),u="/solarnode-image-maker",c=function(e){return function(a){function c(){for(var e,r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];t(this,c);var l=o&&o[0]?o[0]instanceof n.Environment?o[0]:new n.Environment(o[0]):new n.Environment({tls:!0,host:"apps.solarnetwork.net",port:443,nimPath:u});return o||(o=[]),o[0]=l,i(this,(e=c.__proto__||Object.getPrototypeOf(c)).call.apply(e,[this].concat(s(o))))}return o(c,e),r(c,[{key:"baseUrl",value:function(){var e=this.env("nimPath")||u;return this.hostUrl()+e+"/api/v1"}},{key:"pingUrl",value:function(){return this.baseUrl()+"/ping"}},{key:"authorizeSessionUrl",value:function(){return this.baseUrl()+"/images/authorize"}},{key:"listBaseImagesUrl",value:function(){return this.baseUrl()+"/images/infos"}},{key:"createImageUrl",value:function(e,n){var t=n||this.nimSessionKey;return this.baseUrl()+"/images/create/"+encodeURIComponent(e)+"/"+encodeURIComponent(t)}},{key:"createImageReceiptUrl",value:function(e,n){var t=n||this.nimSessionKey;return this.baseUrl()+"/images/receipt/"+encodeURIComponent(e)+"/"+encodeURIComponent(t)}},{key:"downloadImageUrl",value:function(e,n){var t=n||this.nimSessionKey;return this.baseUrl()+"/images/"+encodeURIComponent(e)+"/"+encodeURIComponent(t)}},{key:"nimSessionKey",get:function(){return this.parameter("nimSessionKey")},set:function(e){this.parameter("nimSessionKey",e)}}]),c}()},l=function(e){function n(){return t(this,n),i(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return o(n,e),n}(c(n.UserUrlHelperMixin(n.UrlHelper)));e.SolarNodeImageInfo=a,e.NimUrlHelperMixin=c,e.NimDefaultPath=u,e.NimPathKey="nimPath",e.NimApiPathV1="/api/v1",e.NimUrlHelper=l,Object.defineProperty(e,"__esModule",{value:!0})});